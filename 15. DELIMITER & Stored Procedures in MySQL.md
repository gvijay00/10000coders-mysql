

# **DELIMITER & Stored Procedures in MySQL**

---

## ðŸ”¹ 1. DELIMITER in MySQL

### **Definition**

* `DELIMITER` is a **client-side command** in MySQL that allows you to **temporarily change the statement delimiter** from `;` to another symbol (e.g., `$$`, `//`).
* This is necessary when writing **stored procedures, functions, triggers**, where multiple SQL statements are written and semicolons are used inside their body.

---

### **Why Change the DELIMITER?**

1. **Default Delimiter**:

   * MySQL uses `;` by default to end a statement.
   * Example:

     ```sql
     SELECT * FROM employees;
     ```
2. **Problem**:

   * Inside stored procedures or triggers, multiple statements are separated by `;`.
   * The MySQL client would think the procedure ended at the **first semicolon**, leading to errors.
3. **Solution**:

   * Change delimiter temporarily to `$$` or `//`.
   * This way, MySQL knows that the procedure ends only when the new delimiter is used.

---

### **Key Points about DELIMITER**

* ðŸ”¸ **Temporary Change**: Works only in the current session.
* ðŸ”¸ **Avoid Conflicts**: Use uncommon delimiters like `$$`, `//`, or `#`.
* ðŸ”¸ **Restore Default**: After finishing, always reset to `;`.

---

### **Example of Changing Delimiter**

```sql
DELIMITER $$

CREATE PROCEDURE hello_procedure()
BEGIN
    SELECT 'Hello, MySQL!';
END$$

DELIMITER ;

-- Calling procedure
CALL hello_procedure();
```

---

## ðŸ”¹ 2. Stored Procedures in MySQL

### **Definition**

* A **Stored Procedure** is a **precompiled block of SQL statements** stored in the database.
* It can be called multiple times with input and/or output parameters.

---

### **Advantages of Stored Procedures**

1. **Encapsulation** â€“ Complex business logic is written once and reused.
2. **Performance** â€“ Reduces network traffic; executes directly on the server.
3. **Security** â€“ Exposes controlled access (e.g., no direct access to tables).
4. **Maintainability** â€“ Easy to update logic centrally.

---

### **General Structure**

```sql
DELIMITER $$

CREATE PROCEDURE procedure_name([IN | OUT | INOUT] param_name data_type, ...)
BEGIN
    -- SQL statements
END$$

DELIMITER ;
```

---

### **Parameter Types**

1. **IN** â†’ Input only (default).

   * Value passed **from caller to procedure**.
2. **OUT** â†’ Output only.

   * Value returned **from procedure to caller**.
3. **INOUT** â†’ Both input and output.

   * Value can be passed in, modified, and returned.

---

### **Types of Stored Procedures**

#### âœ… Procedure with **No Parameters**

```sql
DELIMITER $$

CREATE PROCEDURE simple_proc()
BEGIN
    SELECT 'This is a simple stored procedure';
END$$

DELIMITER ;

-- Call procedure
CALL simple_proc();
```

---

#### âœ… Procedure with **Input Parameter**

```sql
DELIMITER $$

CREATE PROCEDURE get_employee(IN emp_id INT)
BEGIN
    SELECT * FROM employees WHERE id = emp_id;
END$$

DELIMITER ;

-- Call procedure with value
CALL get_employee(101);
```

---

#### âœ… Procedure with **Input and Output Parameters**

```sql
DELIMITER $$

CREATE PROCEDURE get_salary(IN emp_id INT, OUT emp_salary DECIMAL(10,2))
BEGIN
    SELECT salary INTO emp_salary
    FROM employees
    WHERE id = emp_id;
END$$

DELIMITER ;

-- Call with output variable
CALL get_salary(101, @output_salary);

-- Fetch the output
SELECT @output_salary;
```

---

#### âœ… Procedure with **INOUT Parameter**

```sql
DELIMITER $$

CREATE PROCEDURE increment_value(INOUT num INT)
BEGIN
    SET num = num + 10;
END$$

DELIMITER ;

-- Declare a variable
SET @x = 5;

-- Call procedure
CALL increment_value(@x);

-- Check updated value
SELECT @x;   -- Output: 15
```

---

## ðŸ”¹ 3. Managing Stored Procedures

### **View Procedures**

```sql
SHOW PROCEDURE STATUS WHERE Db = 'database_name';
```

### **View Procedure Code**

```sql
SHOW CREATE PROCEDURE procedure_name;
```

### **Drop Procedure**

```sql
DROP PROCEDURE procedure_name;
```

---

## ðŸ”¹ 4. Summary Table

| Feature              | Description / Example                                |
| -------------------- | ---------------------------------------------------- |
| **DELIMITER**        | Changes statement end symbol (e.g., `DELIMITER $$`). |
| **Stored Procedure** | Precompiled SQL block stored in DB.                  |
| **IN Parameter**     | Input only (`CALL proc(10);`).                       |
| **OUT Parameter**    | Output only (`CALL proc(10, @x); SELECT @x;`).       |
| **INOUT Parameter**  | Both input & output (`CALL proc(@x);`).              |
| **Show Procedures**  | `SHOW PROCEDURE STATUS WHERE Db='db';`               |
| **Show Code**        | `SHOW CREATE PROCEDURE proc;`                        |
| **Drop Procedure**   | `DROP PROCEDURE proc;`                               |

---

## ðŸ”¹ 5. Real-World Use Cases

1. **Banking System** â€“ Calculate interest or validate transactions.
2. **E-commerce** â€“ Update stock & manage orders automatically.
3. **HR System** â€“ Fetch employee details and calculate salary.
4. **Reporting** â€“ Generate monthly/quarterly reports directly in DB.

---
